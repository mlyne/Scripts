<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>pattern-graph</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link type="text/css" rel="stylesheet" href="../clips.css" />
    <style>
        /* Small fixes because we omit the online layout.css. */
        h3 { line-height: 1.3em; }
        #page { margin-left: auto; margin-right: auto; }
        #header, #header-inner { height: 175px; }
        #header { border-bottom: 1px solid #C6D4DD;  }
        table { border-collapse: collapse; }
    </style>
</head>
<body class="node-type-page one-sidebar sidebar-right section-pages">
    <div id="page">
    <div id="page-inner">
    <div id="header"><div id="header-inner"></div></div>
    <div id="content">
    <div id="content-inner">
    <div class="node node-type-page"
        <div class="node-inner">
        <div class="breadcrumb">View online at: <a href="http://www.clips.ua.ac.be/pages/pattern-graph" class="noexternal" target="_blank">http://www.clips.ua.ac.be/pages/pattern-graph</a></div>
        <h1>pattern.graph</h1>
        <!-- Parsed from the online documentation. -->
        <div id="node-1392" class="node node-type-page"><div class="node-inner">
<div class="content">
<p><span style="font-size: 16px;">The pattern.graph module offers a way to represent and analyze networks of linked data. It can be used to (for example) model semantic relationships between words. It comes bundled with a Javascript generator to create an aesthetically pleasing visualization of a network in a web page.</span></p>
<p>It can be used by itself or with other&nbsp;<a href="pattern.html">pattern</a>&nbsp;modules:&nbsp;<a href="pattern-web.html">web</a>&nbsp;|&nbsp;<a href="pattern-db.html">db</a>&nbsp;|&nbsp;<a href="pattern-en.html">en</a>&nbsp;|&nbsp;<a href="pattern-search.html">search</a>&nbsp;<span class="blue">&nbsp;</span>| <a href="pattern-vector.html">vector</a> |&nbsp;graph.</p>
<p><img style="border: 0px initial initial;" src="../g/pattern_schema.gif" alt="" width="606" height="180" /></p>
<hr />
<h2>Documentation</h2>
<ul>
<li><a href="#node">Node</a></li>
<li><a href="#edge">Edge</a></li>
<li><a href="#graph">Graph</a></li>
<li><a href="#layout">Graph layout</a></li>
<li><a href="#utility">Graph adjacency</a></li>
<li><a href="#canvas">HTML renderer</a></li>
<li><a href="#javascript">graph.js</a></li>
</ul>
<p>&nbsp;</p>
<h2>
<hr /><a name="node"></a>Node</h2>
<p>The <span class="inline_code">Node</span> object represents an element in the graph with a unique id (either <span class="inline_code">str</span> or <span class="inline_code">int</span>).&nbsp;The <span class="inline_code">id</span> is drawn as a text&nbsp;label when the graph is visualized (see the <a href="#canvas">renderer</a> below) â€“ unless the optional <span class="inline_code">text</span> parameter is <span class="inline_code">False</span>. Otherwise, the <span class="inline_code">text</span> parameter defines the label color as an RGBA-tuple with values between <span class="inline_code">0.0-1.0</span>, by default&nbsp;<span class="inline_code">(0,0,0,1)</span>.&nbsp;Optional parameters include: <span class="inline_code">fill</span>, <span class="inline_code">stroke</span>, <span class="inline_code">strokewidth</span>, <span class="inline_code">text</span>, <span class="inline_code">font</span>, <span class="inline_code">fontsize</span>, <span class="inline_code">fontweight</span> to style the node.</p>
<p><span class="geshifilter"><code class="python geshifilter-python">node = Node<span style="">&#40;</span><span style="color: #4a587c;">id</span>=<span style="color: #657a8a;">&quot;&quot;</span>, radius=<span style="color: #666;">5</span>, <span style="">**</span>kwargs<span style="">&#41;</span></code></span></p>
<p><span class="geshifilter"><code class="python geshifilter-python">node.<span style="">graph</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Parent Graph.</span><br />
node.<span style="">edges</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># List of Edge objects.</span><br />
node.<span style="">links</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># List of Node objects.</span><br />
node.<span style="color: #4a587c;">id</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Unique string or int.</span></code></span><span class="geshifilter"><code class="python geshifilter-python">node.<span style="">x</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Horizontal offset.</span><br />
node.<span style="">y</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Vertical offset.</span><br />
node.<span style="">force</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Vector, updated by Graph.layout.</span><br />
node.<span style="">radius</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Default: 5</span><br />
node.<span style="">fill</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Default: None</span><br />
node.<span style="">stroke</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Default: (0,0,0,1)</span><br />
node.<span style="">strokewidth</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Default: 1 </span><br />
node.<span style="">text</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Text object, or None.</span></code></span><span class="geshifilter"><code class="python geshifilter-python">node.<span style="">weight</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Eigenvector centrality (0.0-1.0).</span><br />
node.<span style="">centrality</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Betweenness centrality (0.0-1.0).</span></code></span><span class="geshifilter"><code class="python geshifilter-python">node.<span style="">flatten</span><span style="">&#40;</span>depth=<span style="color: #666;">1</span><span style="">&#41;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># List of linked nodes + self.</span></code></span></p>
<ul>
<li><span class="inline_code">Node.links.edge(node)</span>&nbsp;yields the <span class="inline_code">Edge</span> connecting this node to the given <span class="inline_code">node</span>.</li>
<li><span class="inline_code">Node.flatten()</span> returns a list with the node itself (<span class="inline_code">depth=0</span>), directly connected nodes (<span class="inline_code">depth=1</span>), nodes connected to those nodes (<span class="inline_code">depth=2</span>), and so on.</li>
</ul>
<p><span class="smallcaps">Node weight and centrality</span></p>
<ul>
<li><span class="inline_code">Node.centrality</span> indicates the node's passing traffic (or&nbsp;<em>betweenness centrality</em>): how often it occurs in shortest paths, as a value between <span class="inline_code">0.0-1.0</span>. Highly trafficked nodes can be thought of as hubs, landmarks, crossroads, etc.</li>
</ul>
<ul>
<li><span class="inline_code">Node.weight</span> indicates the node's incoming traffic or (<em>eigenvector centrality</em>): how many nodes are connected to it, as a value between <span class="inline_code">0.0-1.0</span>. Nodes that (indirectly) connect to high-scoring nodes get a better score themselves. In this case the edge direction plays an important role: ideally, everyone is pointing at you and you are pointing at no-one, meaning that you are at the top of hierarchy.<br /><span style="font-size: 11px;"><span style="text-decoration: underline;"><br />Reference</span>: NetworkX (2008). Barnes, C. (2005), <em>simplified Dijkstra</em>. Brandes, E. (2001), <em>faster betweenness</em>.</span></li>
</ul>
<p>&nbsp;</p>
<hr />
<h2><a name="edge"></a>Edge</h2>
<p>The <span class="inline_code">Edge</span> object represents a connection between two nodes. Its <span class="inline_code">weight</span> indicates the importance (not the cost) of the connection. Edges with a higher weight are preferred in shortest paths.&nbsp;Optional parameters include <span class="inline_code">stroke</span> and <span class="inline_code">strokewidth</span>, used to style the visualization (see the <a href="#canvas">renderer</a> below).</p>
<p><span class="geshifilter"><code class="python geshifilter-python">edge = Edge<span style="">&#40;</span>node1, node2, weight=<span style="color: #666;">0.0</span>, length=<span style="color: #666;">1.0</span>, type=<span style="color: #4a587c;">None</span>, <span style="">**</span>kwargs<span style="">&#41;</span></code></span></p>
<p><span class="geshifilter"><code class="python geshifilter-python">edge.<span style="">node1</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Node (sender).</span><br />
edge.<span style="">node2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Node (receiver).</span><br />
edge.<span style="">weight</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Connection strength.</span><br />
edge.<span style="">length</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Length modifier when drawn.</span><br />
edge.<span style="">type</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Useful in semantic networks.</span><br />
edge.<span style="">stroke</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Default: (0,0,0,1)</span><br />
edge.<span style="">strokewidth</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Default: 1 </span></code></span></p>
<p><span class="smallcaps"><br />Directed edges</span></p>
<ul>
<li>An edge can be traversed in both directions:&nbsp;<span class="inline_code">node1</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">node2</span> and <span class="inline_code">node2</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">node1</span>. Some methods (for example <span class="inline_code">Graph.shortest_path()</span>&nbsp;and <span class="inline_code">Graph.betweenness_centrality()</span>) have a <span class="inline_code">directed</span> parameter which when set to <span class="inline_code">True</span>, regards an edge as going only in one direction: <span class="inline_code">node1</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">node2</span>. This obviously produces different paths and node weights.</li>
</ul>
<ul>
<li>Two nodes can be connected by at most two edges (one in each direction). Otherwise, calling&nbsp;<span class="inline_code">Graph.add_edge()</span>&nbsp;simply returns the edge that already exists between the given nodes.</li>
</ul>
<p>&nbsp;</p>
<h2>
<hr /><a name="graph"></a>Graph</h2>
<p>The <span class="inline_code">Graph</span> object is a network of nodes connected by edges.</p>
<p><span class="geshifilter"><code class="python geshifilter-python">graph = Graph<span style="">&#40;</span>layout=SPRING, distance=<span style="color: #666;">10.0</span><span style="">&#41;</span></code></span><span class="geshifilter"><code class="python geshifilter-python">graph<span style="">&#91;</span><span style="color: #4a587c;">id</span><span style="">&#93;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Node with given id (Graph is dict subclass).</span><br />
graph.<span style="">nodes</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># List of Node objects.</span><br />
graph.<span style="">edges</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># List of Edge objects.</span><br />
graph.<span style="">root</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Node or None.</span><br />
graph.<span style="">density</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># &lt;0.35 =&gt; sparse, &gt;0.65 =&gt; dense</span><br />
graph.<span style="">distance</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Overall layout spacing.</span><br />
graph.<span style="">layout</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># GraphSpringLayout.</span></code></span><span class="geshifilter"><code class="python geshifilter-python">graph.<span style="">add_node</span><span style="">&#40;</span><span style="color: #4a587c;">id</span>, <span style="">*</span>args, <span style="">**</span>kwargs, root=<span style="color: #4a587c;">False</span><span style="">&#41;</span> <span style="color: grey;"># Creates + returns new Node.</span><br />
graph.<span style="">add_edge</span><span style="">&#40;</span>id1, id2, <span style="">*</span>args, <span style="">**</span>kwargs<span style="">&#41;</span> &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Creates + returns new Edge.</span><br />
graph.<span style="">remove</span><span style="">&#40;</span>node<span style="">&#41;</span><br />
graph.<span style="">remove</span><span style="">&#40;</span>edge<span style="">&#41;</span></code></span><span class="geshifilter"><code class="python geshifilter-python">graph.<span style="">betweenness_centrality</span><span style="">&#40;</span><span style="">&#41;</span> <span style="color: grey;"># Updates all Node.centrality.</span><br />
graph.<span style="">eigenvector_centrality</span><span style="">&#40;</span><span style="">&#41;</span> <span style="color: grey;"># Updates all Node.weight. </span></code></span><span class="geshifilter"><code class="python geshifilter-python">graph.<span style="">shortest_path</span><span style="">&#40;</span>node1, node2, heuristic=<span style="color: #4a587c;">None</span>, directed=<span style="color: #4a587c;">False</span><span style="">&#41;</span><br />
graph.<span style="">shortest_paths</span><span style="">&#40;</span>node, heuristic=<span style="color: #4a587c;">None</span>, directed=<span style="color: #4a587c;">False</span><span style="">&#41;</span><br />
graph.<span style="">paths</span><span style="">&#40;</span>node1, node2, length=<span style="color: #666;">4</span><span style="">&#41;</span><br />
graph.<span style="color: #4a587c;">sorted</span><span style="">&#40;</span>order=WEIGHT, threshold=<span style="color: #666;">0.0</span><span style="">&#41;</span><br />
graph.<span style="">prune</span><span style="">&#40;</span>depth=<span style="color: #666;">0</span><span style="">&#41;</span><br />
graph.<span style="">fringe</span><span style="">&#40;</span>depth=<span style="color: #666;">0</span><span style="">&#41;</span><br />
graph.<span style="">split</span><span style="">&#40;</span><span style="">&#41;</span><br />
graph.<span style="">copy</span><span style="">&#40;</span>nodes=ALL<span style="">&#41;</span></code></span><span class="geshifilter"><code class="python geshifilter-python">graph.<span style="">update</span><span style="">&#40;</span>iterations=<span style="color: #666;">10</span>, weight=<span style="color: #666;">10</span>, limit=<span style="color: #666;">0.5</span><span style="">&#41;</span></code></span></p>
<ul>
<li><span class="inline_code"><span style="font-family: Georgia, Times, serif; font-size: 13px;"><span class="inline_code" style="font-family: Courier, monospace; font-size: 12px;">Graph.add_node()</span>&nbsp;has an optional&nbsp;<span class="inline_code" style="font-family: Courier, monospace; font-size: 12px;">base</span>&nbsp;parameter which can be a subclass of&nbsp;<span class="inline_code" style="font-family: Courier, monospace; font-size: 12px;">Node</span>&nbsp;to use.</span><br /></span></li>
<li><span class="inline_code">Graph.add_edge()</span>&nbsp;has an optional <span class="inline_code">base</span> parameter which can be a subclass of <span class="inline_code">Edge</span> to use.</li>
<li><span class="inline_code" style="font-family: Courier, monospace; font-size: 12px;"><span style="font-family: Georgia, Times, serif; font-size: 13px;"><span class="inline_code" style="font-family: Courier, monospace; font-size: 12px;">Graph.shortest_path()</span>&nbsp;returns a list of nodes connecting two nodes.</span><br /></span></li>
<li><span class="inline_code" style="font-family: Courier, monospace; font-size: 12px;">Graph.shortest_paths()</span>&nbsp;returns a dictionary of nodes linked to shortest path.<br />With <span class="inline_code">directed=True</span>, edges are only traversable in a single direction.<br />A <span class="inline_code">heuristic</span> function can be given that takes two node id's and returns an additional cost for movement between the two nodes.</li>
<li><span class="inline_code">Graph.paths()</span> returns a list of paths &lt;=&nbsp;<span class="inline_code">length</span> connecting the two nodes.</li>
<li><span class="inline_code">Graph.sorted()</span> returns a list of nodes sorted by <span class="inline_code">WEIGHT</span> or <span class="inline_code">CENTRALITY</span>.<br />If the value falls below the given <span class="inline_code">threshold</span>, the node is excluded from the list.</li>
<li><span class="inline_code">Graph.prune()</span> removes all nodes with less or equal links than <span class="inline_code">depth</span>.</li>
<li><span class="inline_code">Graph.fringe()</span> returns a list of leaf nodes.<br />With <span class="inline_code">depth=0</span>, returns the nodes with only one connection.<br />With <span class="inline_code">depth=1</span>, returns the nodes with one connection + their connections, etc.</li>
<li><span class="inline_code">Graph.split()</span> returns a list of unconnected subgraphs.</li>
<li><span class="inline_code">Graph.copy()</span> returns a new graph from the given list of nodes.</li>
</ul>
<p>For example:</p>
<p><span class="example"><span class="geshifilter"><code class="python geshifilter-python"><span style="">&gt;&gt;&gt;</span> <span style="color: #28334f; font-weight: bold;">from</span> pattern.<span style="">graph</span> <span style="color: #28334f; font-weight: bold;">import</span> Graph<br />
<span style="">&gt;&gt;&gt;</span> g = Graph<span style="">&#40;</span><span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> <span style="color: #28334f; font-weight: bold;">for</span> n1, n2 <span style="color: #28334f; font-weight: bold;">in</span> <span style="">&#40;</span><span style="">&#40;</span><span style="color: #657a8a;">'cat'</span>,<span style="color: #657a8a;">'tail'</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">'cat'</span>,<span style="color: #657a8a;">'purr'</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">'purr'</span>,<span style="color: #657a8a;">'sound'</span><span style="">&#41;</span>,<br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="">&#40;</span><span style="color: #657a8a;">'dog'</span>,<span style="color: #657a8a;">'tail'</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">&quot;dog&quot;</span>,<span style="color: #657a8a;">&quot;bark&quot;</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">&quot;bark&quot;</span>,<span style="color: #657a8a;">&quot;sound&quot;</span><span style="">&#41;</span><span style="">&#41;</span>:<br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp;g.<span style="">add_node</span><span style="">&#40;</span>n1<span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp;g.<span style="">add_node</span><span style="">&#40;</span>n2<span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp;g.<span style="">add_edge</span><span style="">&#40;</span>n1, n2, weight=<span style="color: #666;">0.0</span>, type=<span style="color: #657a8a;">'is-related-to'</span><span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> <span style="color: #28334f; font-weight: bold;">print</span> g.<span style="color: #4a587c;">sorted</span><span style="">&#40;</span><span style="">&#41;</span><br />
<br />
<span style="">&#91;</span>Node<span style="">&#40;</span><span style="color: #4a587c;">id</span>=<span style="color: #657a8a;">'sound'</span><span style="">&#41;</span>, Node<span style="">&#40;</span><span style="color: #4a587c;">id</span>=<span style="color: #657a8a;">'tail'</span><span style="">&#41;</span>, Node<span style="">&#40;</span><span style="color: #4a587c;">id</span>=<span style="color: #657a8a;">'bark'</span><span style="">&#41;</span>, Node<span style="">&#40;</span><span style="color: #4a587c;">id</span>=<span style="color: #657a8a;">'purr'</span><span style="">&#41;</span><span style="">&#93;</span> </code></span></span></p>
<table border="0">
<tbody>
<tr>
<td>
<p>When sorted by node weight (i.e. eigenvector centrality),&nbsp;<em>sound</em>&nbsp;is the most important node in the network. This is easier to grasp if we look at the visualization on the right. Most nodes are pointing at&nbsp;<em>sound</em>&nbsp;or&nbsp;<em>tail</em>.&nbsp;No nodes are pointing at&nbsp;<em>dog</em>&nbsp;or&nbsp;<em>cat</em>, so these are the least important in the network (weight=0).</p>
<p>We could say that the (directed!) network is not about dogs and cats, but primarily about the sounds these animals make, so it is about sound.</p>
</td>
<td><img src="../g/pattern_graph3.jpg" alt="" width="170" height="155" /></td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<h2>
<hr /><a name="layout"></a>Graph layout</h2>
<p>A <span class="inline_code">GraphLayout</span> object calculates node positions (<span class="inline_code">Node.x</span>,&nbsp;<span class="inline_code">Node.y</span>) iteratively each time&nbsp;<span class="inline_code">GraphLayout.update()</span> is called. Currently, the only available implementation is <span class="inline_code">GraphSpringLayout</span>,&nbsp;which uses a force-based algorithm where edges are regarded as springs. The forces are applied to the nodes, pulling them closer together or pushing them further apart.</p>
<p><span class="geshifilter"><code class="python geshifilter-python">layout = GraphSpringLayout<span style="">&#40;</span>graph<span style="">&#41;</span></code></span><span class="geshifilter"><code class="python geshifilter-python">layout.<span style="">graph</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Graph owner.</span><br />
layout.<span style="">iterations</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># Starts at 0, +1 on each update().</span><br />
layout.<span style="">bounds</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="color: grey;"># (x, y, width, height)-tuple.</span></code></span></p>
<p><span class="geshifilter"><code class="python geshifilter-python">layout.<span style="">k</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Force constant &nbsp; (4.0)</span><br />
layout.<span style="">force</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Force multiplier (0.01) </span><br />
layout.<span style="">repulsion</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: grey;"># Maximum repulsion radius (15)</span></code></span><span class="geshifilter"><code class="python geshifilter-python">layout.<span style="">update</span><span style="">&#40;</span>weight=<span style="color: #666;">10.0</span>, limit=<span style="color: #666;">0.5</span><span style="">&#41;</span> <span style="color: grey;"># weight = Edge.weight multiplier.</span><br />
layout.<span style="">reset</span><span style="">&#40;</span><span style="">&#41;</span><br />
layout.<span style="">copy</span><span style="">&#40;</span>graph<span style="">&#41;</span></code></span></p>
<p><span class="small"><span style="text-decoration: underline;">Reference</span>: Hellesoy, A. &amp; Hoover, D. (2006). http://ajaxian.com/archives/new-javascriptcanvas-graph-library</span></p>
<p>&nbsp;</p>
<hr />
<h2><a name="utility"></a>Graph adjacency</h2>
<p>Utility commands to modify graph edges, while keeping <span class="inline_code">Graph.edges</span> and <span class="inline_code">Node.links</span> in synch:</p>
<p><span class="geshifilter"><code class="python geshifilter-python">unlink<span style="">&#40;</span>graph, node1, node2=<span style="color: #4a587c;">None</span><span style="">&#41;</span></code></span><span class="geshifilter"><code class="python geshifilter-python">redirect<span style="">&#40;</span>graph, node1, node2<span style="">&#41;</span></code></span><span class="geshifilter"><code class="python geshifilter-python">cut<span style="">&#40;</span>graph, node<span style="">&#41;</span></code></span><span class="geshifilter"><code class="python geshifilter-python">insert<span style="">&#40;</span>graph, node, a, b<span style="">&#41;</span></code></span></p>
<ul>
<li><span class="inline_code">unlink()</span>&nbsp;removes&nbsp;the edges between&nbsp;<span class="inline_code">node1</span>&nbsp;and&nbsp;<span class="inline_code">node2</span>.&nbsp;<br />If only&nbsp;<span class="inline_code">node1</span>&nbsp;is given, removes all edges to + from it.&nbsp;This does not remove&nbsp;<span class="inline_code">node1</span>&nbsp;from the graph.</li>
<li><span class="inline_code">redirect()</span>&nbsp;connects all of&nbsp;<span class="inline_code">node1</span>'s edges to&nbsp;<span class="inline_code">node2</span>&nbsp;and unlinks&nbsp;<span class="inline_code">node1</span>.</li>
<li><span class="inline_code">cut()</span>&nbsp;unlinks the given&nbsp;<span class="inline_code">node</span>, but keeps edges intact by connecting the surrounding nodes.&nbsp;<br />If&nbsp;<span class="inline_code">A</span>,&nbsp;<span class="inline_code">B</span>,&nbsp;<span class="inline_code">C</span>,&nbsp;<span class="inline_code">D</span>&nbsp;are nodes and&nbsp;<span class="inline_code">A</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">B</span>,&nbsp;<span class="inline_code">B</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">C</span>,&nbsp;<span class="inline_code">B</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">D</span>, if we then cut&nbsp;<span class="inline_code">B</span>:&nbsp;<span class="inline_code">A</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">C</span>,&nbsp;<span class="inline_code">A</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">D</span>.</li>
<li><span class="inline_code">insert()</span>&nbsp;inserts the given&nbsp;<span class="inline_code">node</span>&nbsp;between node&nbsp;<span class="inline_code">a</span>&nbsp;and node&nbsp;<span class="inline_code">b</span>.&nbsp;<br />If&nbsp;<span class="inline_code">A</span>,&nbsp;<span class="inline_code">B</span>,&nbsp;<span class="inline_code">C</span>&nbsp;are nodes and&nbsp;<span class="inline_code">A</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">B</span>, if we then insert&nbsp;<span class="inline_code">C</span>:&nbsp;<span class="inline_code">A</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">C</span>,&nbsp;<span class="inline_code">C</span>&nbsp;<span>â†’</span>&nbsp;<span class="inline_code">B</span>.</li>
</ul>
<h3>Edge adjacency map</h3>
<p><span class="smallcaps"><span style="font-variant: normal;">The&nbsp;<span class="inline_code">adjacency()</span>&nbsp;command returns a map of linked nodes:</span><br /></span></p>
<p><span class="geshifilter"><code class="python geshifilter-python">adjacency<span style="">&#40;</span>graph, <br />
&nbsp; &nbsp; &nbsp; directed = <span style="color: #4a587c;">False</span>, <br />
&nbsp; &nbsp; &nbsp; <span style="color: #4a587c;">reversed</span> = <span style="color: #4a587c;">False</span>, <br />
&nbsp; &nbsp; stochastic = <span style="color: #4a587c;">False</span>, <br />
&nbsp; &nbsp; &nbsp;heuristic = <span style="color: #28334f; font-weight: bold;">lambda</span> node1, node2: <span style="color: #666;">0</span><span style="">&#41;</span></code></span></p>
<p>The return value is&nbsp;a dictionary indexed by node id1's,&nbsp;in which each value is a dictionary of connected node id2's linking to the edge weight.&nbsp;If&nbsp;<span class="inline_code">directed=True</span>, edges go from id1 to id2, but not the other way.&nbsp;If&nbsp;<span class="inline_code">stochastic=True</span>, all the weights for the neighbors of a given node sum to&nbsp;<span class="inline_code">1</span>.&nbsp;</p>
<p>A&nbsp;<span class="inline_code">heuristic</span>&nbsp;function can be given that takes two node id's and returns&nbsp;an additional cost for movement between the two nodes.</p>
<h3>Edge traversal</h3>
<p>The <span class="inline_code">bfs()</span> command (breadth-first search) visits all the nodes connected to the given&nbsp;<span class="inline_code">node</span>. <br />The <span class="inline_code">dfs()</span> command (depth-first search)&nbsp;visits all the nodes connected to the given <span class="inline_code">node</span>&nbsp;<em>depth first</em>, i.e. as far as possible along each branch before backtracking.</p>
<p><span class="geshifilter"><code class="python geshifilter-python">bfs<span style="">&#40;</span>node, visit=<span style="color: #28334f; font-weight: bold;">lambda</span> node: <span style="color: #4a587c;">False</span>, traversable=<span style="color: #28334f; font-weight: bold;">lambda</span> node, edge: <span style="color: #4a587c;">True</span><span style="">&#41;</span></code></span></p>
<p><span class="geshifilter"><code class="python geshifilter-python">dfs<span style="">&#40;</span>node, visit=<span style="color: #28334f; font-weight: bold;">lambda</span> node: <span style="color: #4a587c;">False</span>, traversable=<span style="color: #28334f; font-weight: bold;">lambda</span> node, edge: <span style="color: #4a587c;">True</span><span style="">&#41;</span></code></span></p>
<p>The <span class="inline_code">visit</span> function is called on each node.&nbsp;Recursion will stop if it returns <span class="inline_code">True</span>, and subsequently the command&nbsp;will return True.&nbsp;</p>
<p>The <span class="inline_code">traversable</span> function takes the current node and edge&nbsp;and returns <span class="inline_code">True</span> if we are allowed to follow this connection to the next node.&nbsp;For example, the traversable for directed edges is follows:&nbsp;<br /><span class="inline_code">lambda node, edge: node == edge.node1</span></p>
<p>&nbsp;</p>
<hr />
<h2><a name="canvas"></a>HTML &lt;canvas&gt; renderer</h2>
<p>To visualize a graph, we need a drawing engine (e.g. Flash). The&nbsp;<span class="inline_code">Graph</span>, <span class="inline_code">Node</span> and <span class="inline_code">Edge</span> classes are&nbsp;identical to those in <a href="http://cityinabottle.org/nodebox" target="_blank">NodeBox for OpenGL</a>, a cross-platform Python animation toolkit, so graphs can be rendered in NodeBox without effort.&nbsp;Another option is to export the graph to a web page: the <span class="inline_code">&lt;canvas&gt;</span> element is part of HTML5 and allows for dynamic, scriptable rendering of 2D shapes and bitmap images.</p>
<h3>Exporting as a web page</h3>
<p>The <span class="inline_code">export(</span>) command creates a folder at the given <span class="inline_code">path</span> containing an <span class="inline_code">index.html</span>&nbsp;that visualizes the graph using &lt;canvas&gt;. The folder also has a <span class="inline_code">screen.css</span> stylesheet and a <span class="inline_code">js/</span> subfolder with <span class="inline_code">graph.js</span> (full Javascript implementation of <span class="inline_code">pattern.graph</span>) and <span class="inline_code">excanvas.js</span>&nbsp;(support for IE8-). If an optional parameter <span class="inline_code">js</span> is given, it is expected to be a URL path to&nbsp;<span class="inline_code">graph.js</span> + <span class="inline_code">excanvas.js</span>&nbsp;(subfolder will not be included in this case).</p>
<p><span class="geshifilter"><code class="python geshifilter-python">export<span style="">&#40;</span>graph, path, overwrite=<span style="color: #4a587c;">False</span>, encoding=<span style="color: #657a8a;">'utf-8'</span>, <span style="">**</span>kwargs<span style="">&#41;</span></code></span></p>
<p>For example:</p>
<p><span class="example"><span class="geshifilter"><code class="python geshifilter-python"><span style="">&gt;&gt;&gt;</span> <span style="color: #28334f; font-weight: bold;">from</span> pattern.<span style="">graph</span> <span style="color: #28334f; font-weight: bold;">import</span> Graph, export<br />
<span style="">&gt;&gt;&gt;</span> g = Graph<span style="">&#40;</span><span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> <span style="color: #28334f; font-weight: bold;">for</span> n1, n2 <span style="color: #28334f; font-weight: bold;">in</span> <span style="">&#40;</span><span style="">&#40;</span><span style="color: #657a8a;">'cat'</span>,<span style="color: #657a8a;">'tail'</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">'cat'</span>,<span style="color: #657a8a;">'purr'</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">'purr'</span>,<span style="color: #657a8a;">'sound'</span><span style="">&#41;</span>,<br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="">&#40;</span><span style="color: #657a8a;">'dog'</span>,<span style="color: #657a8a;">'tail'</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">&quot;dog&quot;</span>,<span style="color: #657a8a;">&quot;bark&quot;</span><span style="">&#41;</span>, <span style="">&#40;</span><span style="color: #657a8a;">&quot;bark&quot;</span>,<span style="color: #657a8a;">&quot;sound&quot;</span><span style="">&#41;</span><span style="">&#41;</span>:<br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp;g.<span style="">add_node</span><span style="">&#40;</span>n1<span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp;g.<span style="">add_node</span><span style="">&#40;</span>n2<span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> &nbsp; &nbsp;g.<span style="">add_edge</span><span style="">&#40;</span>n1, n2, weight=<span style="color: #666;">0.0</span>, type=<span style="color: #657a8a;">'is-related-to'</span><span style="">&#41;</span><br />
<span style="">&gt;&gt;&gt;</span> export<span style="">&#40;</span>g, <span style="color: #657a8a;">'sound'</span>, directed=<span style="color: #4a587c;">True</span><span style="">&#41;</span></code></span></span></p>
<p>Nodes and edges will be styled according to their&nbsp;<span class="inline_code">fill</span>,&nbsp;<span class="inline_code">stroke</span>, and&nbsp;<span class="inline_code">strokewidth</span>.<br />Many optional parameters can be given to customize the visualization:</p>
<table class="border">
<tbody>
<tr>
<td><span class="smallcaps">Parameter</span></td>
<td><span class="smallcaps">Default</span></td>
<td><span class="smallcaps">Description</span></td>
</tr>
<tr>
<td><span class="inline_code">javascript</span></td>
<td><span class="inline_code">'js/'</span></td>
<td>Path to <span class="inline_code">excanvas.js</span> + <span class="inline_code">graph.js</span>.</td>
</tr>
<tr>
<td><span class="inline_code">stylesheet</span></td>
<td><span style="font-family: Courier, monospace; font-size: small;"><span style="font-size: 12px;">INLINE</span></span></td>
<td><span class="inline_code">None</span>, <span class="inline_code">INLINE</span>, <span class="inline_code">DEFAULT</span> (screen.css) or custom path.</td>
</tr>
<tr>
<td><span class="inline_code">title</span></td>
<td><span class="inline_code">'Graph'</span></td>
<td><span class="inline_code"><span style="font-family: Georgia, Times, serif; font-size: 13px;">Generates&nbsp;<span class="inline_code">&lt;title&gt;Graph&lt;/title&gt;</span>.</span></span></td>
</tr>
<tr>
<td><span class="inline_code">id</span></td>
<td><span class="inline_code">'graph'</span></td>
<td>Generates <span class="inline_code">&lt;div id="graph"&gt;</span> containing <span class="inline_code">&lt;canvas&gt;</span>.</td>
</tr>
<tr>
<td><span class="inline_code">ctx</span></td>
<td><span class="inline_code">'_ctx'</span></td>
<td>Generates <span class="inline_code">&lt;canvas id="_ctx" width=700 height=500&gt;</span>.</td>
</tr>
<tr>
<td><span class="inline_code">width</span></td>
<td><span class="inline_code">700</span></td>
<td>Canvas width in pixels.</td>
</tr>
<tr>
<td><span class="inline_code">height</span></td>
<td><span class="inline_code">500</span></td>
<td>Canvas height in pixels.</td>
</tr>
<tr>
<td><span class="inline_code">frames</span></td>
<td><span class="inline_code">500</span></td>
<td>Number of frames of animation.</td>
</tr>
<tr>
<td><span class="inline_code">fps</span></td>
<td><span class="inline_code">20</span></td>
<td>Frames per second.</td>
</tr>
<tr>
<td><span class="inline_code">ipf</span></td>
<td><span class="inline_code">2</span></td>
<td><span class="inline_code">GraphLayout.update()</span> iterations per frame.</td>
</tr>
<tr>
<td><span class="inline_code">weighted</span></td>
<td><span class="inline_code">False</span></td>
<td>
<p>Indicate betweenness as a shadow? (<span class="inline_code">bool</span> or <span class="inline_code">float</span> <span class="inline_code">%</span>)</p>
</td>
</tr>
<tr>
<td><span class="inline_code">directed</span></td>
<td><span class="inline_code">False</span></td>
<td>Indicate edge direction with an arrow?</td>
</tr>
<tr>
<td><span class="inline_code">prune</span></td>
<td><span class="inline_code">None</span></td>
<td><span class="inline_code">None</span> or <span class="inline_code">int</span>, calls <span class="inline_code">Graph.prune()</span> in Javascript.</td>
</tr>
<tr>
<td><span class="inline_code">pack</span></td>
<td><span class="inline_code">True</span></td>
<td>Shortens leaf edges &amp; adds node weight to node radius.</td>
</tr>
<tr>
<td><span class="inline_code">distance</span></td>
<td><span class="inline_code">10</span></td>
<td>Node spacing.</td>
</tr>
<tr>
<td><span class="inline_code">k</span></td>
<td><span class="inline_code">4.0</span></td>
<td>Force constant.</td>
</tr>
<tr>
<td><span class="inline_code">force</span></td>
<td><span class="inline_code">0.01</span></td>
<td>Force dampener.</td>
</tr>
<tr>
<td><span class="inline_code">repulsion</span></td>
<td><span class="inline_code">50</span></td>
<td>Repulsive force radius.</td>
</tr>
<tr>
<td><span class="inline_code">weight</span></td>
<td><span class="inline_code">[WEIGHT,CENTRALITY]</span></td>
<td>Calculate these in Python, or <span class="inline_code">True</span> (in Javascript), or <span class="inline_code">False</span>.</td>
</tr>
<tr>
<td><span class="inline_code">href</span></td>
<td><span class="inline_code">{}</span></td>
<td>Dictionary of <span class="inline_code">Node.id</span> =&gt; URL.</td>
</tr>
<tr>
<td><span class="inline_code">css</span></td>
<td><span class="inline_code">{}</span></td>
<td>Dictionary of <span class="inline_code">Node.id</span> =&gt; CSS classname.</td>
</tr>
<tr>
<td><span class="inline_code">default</span></td>
<td style="white-space: nowrap;"><span class="inline_code">{'radius': 5,<br />&nbsp;'fill': None,<br />&nbsp;'stroke': (0,0,0,1),<br />&nbsp;'strokewidth': 1,<br />&nbsp;'text': (0,0,0,1),<br />&nbsp;'fontsize': 11<br />}&nbsp;</span></td>
<td><span class="inline_code"><span style="font-family: Georgia, Times, serif; font-size: small;"><span style="font-size: 13px;">To save bandwidth,</span></span></span>&nbsp;<span class="inline_code">Node</span> and <span class="inline_code">Edge</span>&nbsp;attributes are only passed to Javascript if they differ from the default.</td>
</tr>
</tbody>
</table>
<h3>Rendering as a HTML string</h3>
<p>Separate parts of the HTML can be generated dynamically with the&nbsp;<span class="inline_code">render()</span>&nbsp;command. <br />This is useful if you have a HTML template and you want to load nodes and edges on-the-fly.</p>
<p><span class="geshifilter"><code class="python geshifilter-python">render<span style="">&#40;</span>graph, type=HTML, <span style="">**</span>kwargs<span style="">&#41;</span> <span style="color: grey;"># Same optional parameters as export().</span></code></span></p>
<table class="border">
<tbody>
<tr>
<td><span class="smallcaps">Type</span></td>
<td><span class="smallcaps">Return value</span></td>
</tr>
<tr>
<td><span class="inline_code">DATA</span></td>
<td>Javascript string that loads the&nbsp;<span class="inline_code">Graph</span>&nbsp;in&nbsp;<span class="inline_code">var g</span>&nbsp;to be used in&nbsp;<span class="inline_code">&lt;canvas id="_ctx"&gt;</span>.</td>
</tr>
<tr>
<td><span class="inline_code">SCRIPT</span></td>
<td><span class="inline_code">DATA</span>&nbsp;+ prune + pack + weights + a call to&nbsp;<span class="inline_code">g.loop()</span>&nbsp;to start the animation.</td>
</tr>
<tr>
<td><span class="inline_code">STYLE</span></td>
<td>CSS string with a minimal style for&nbsp;<span class="inline_code">&lt;div id="graph"&gt;</span>.</td>
</tr>
<tr>
<td><span class="inline_code">CANVAS</span></td>
<td>HTML string with a&nbsp;<span class="inline_code">&lt;div id="graph"&gt;</span>&nbsp;containing&nbsp;<span class="inline_code">&lt;canvas id="_ctx"&gt;</span>.</td>
</tr>
<tr>
<td><span class="inline_code">HTML</span></td>
<td><span class="inline_code">SCRIPT</span>&nbsp;+&nbsp;<span class="inline_code">STYLE</span>&nbsp;+&nbsp;<span class="inline_code">CANVAS</span>&nbsp;bundled in a HTML document.
</td>
</tr>
</tbody>
</table>
<p><span class="smallcaps">Static vs. dynamic</span></p>
<p>The most exhaustive graph operations are the spring layout, &nbsp;<span class="inline_code">GraphSpringLayout.update()</span>, and calculating weights:&nbsp;<span class="inline_code">Graph.betweenness_centrality()</span>&nbsp;and&nbsp;<span class="inline_code">Graph.eigenvector_centrality()</span>.&nbsp;The latter two are called automatically the first time you fetch&nbsp;<span class="inline_code">Node.weight</span> or <span class="inline_code">Node.centrality</span>.&nbsp;You can opt to do some or all of the calculations in Python (i.e. server-side) or in Javascript (i.e. client-side).&nbsp;</p>
<ul>
<li>If the nodes and edges are updated dynamically, calculate the weights client-side.&nbsp;</li>
<li>If the nodes and edges never change, calculate the weights in Python and export once:&nbsp;<br /><span class="inline_code">export(graph, path, weights=[WEIGHT, CENTRALITY])</span>.&nbsp;</li>
<li>If you don't need fancy animation, calculate node positions in Python and export as a single frame:<span class="inline_code"> <br />export(graph, path, frames=1, ipf=0)</span>.</li>
<li>Choose good&nbsp;<span class="inline_code">default</span>&nbsp;values to minimize data passed from Python to Javascript.</li>
</ul>
<p>&nbsp;</p>
<h3>
<hr /></h3>
<h2><a name="javascript"></a>Javascript library: graph.js</h2>
<p>Below is a concise demonstration of <span class="inline_code">graph.js</span>&nbsp;(co-authored by Daniel Friesen). &nbsp;<br />Its implementation is identical to the Python module, except for some naming conventions (e.g. <span class="inline_code">Graph.eigenvector_centrality()</span> is written as&nbsp;<span class="inline_code">Graph.eigenvectorCentrality()</span>&nbsp;in Javascript), optional parameters, and the addition of the&nbsp;<span class="inline_code">Graph.loop()</span> method which starts the interactive animation (<span class="link-maintenance"><a href="http://www.clips.ua.ac.be/media/pattern-graph/random" target="_blank">view live demo</a></span>):</p>
<p><span class="example"><span class="geshifilter"><code class="html4strict geshifilter-html4strict">&lt;!DOCTYPE html&gt; <br />
&lt;<span style="color: #28334f; font-weight: bold;">html</span>&gt;</code></span></span></p>
<p><span class="example"><span class="geshifilter"><code class="html4strict geshifilter-html4strict">&lt;<span style="color: #28334f; font-weight: bold;">head</span>&gt; <br />
&nbsp; &lt;<span style="color: #28334f; font-weight: bold;">meta</span> <span style="">http-equiv</span><span style="">=</span><span style="color: #657a8a;">&quot;Content-Type&quot;</span> <span style="">content</span><span style="">=</span><span style="color: #657a8a;">&quot;text/html; charset=utf-8&quot;</span> <span style="">/</span>&gt;<br />
&nbsp; &lt;<span style="color: #28334f; font-weight: bold;">script</span> <span style="">type</span><span style="">=</span><span style="color: #657a8a;">&quot;text/javascript&quot;</span> <span style="">src</span><span style="">=</span><span style="color: #657a8a;">&quot;graph.js&quot;</span>&gt;&lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">script</span>&gt;<br />
&nbsp; &lt;<span style="color: #28334f; font-weight: bold;">script</span> <span style="">type</span><span style="">=</span><span style="color: #657a8a;">&quot;text/javascript&quot;</span>&gt; &nbsp;<br />
&nbsp; &nbsp; function init_graph() {<br />
&nbsp; &nbsp; &nbsp; g = new Graph(document.getElementById(&quot;_ctx&quot;));<br />
&nbsp; &nbsp; &nbsp; for (var i=0; i &lt; <span style="color: #666;">50</span>; i++<span style="">&#41;</span> <span style="">&#123;</span> <span style="">//</span> Random nodes.<br />
&nbsp; &nbsp; &nbsp; &nbsp; g.addNode<span style="">&#40;</span>i+<span style="color: #666;">1</span><span style="">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span style="">&#125;</span><br />
&nbsp; &nbsp; &nbsp; <span style="">for</span> <span style="">&#40;</span>var i<span style="">=</span><span style="color: #666;">0</span>; i &lt; <span style="color: #666;">75</span>; i++<span style="">&#41;</span> <span style="">&#123;</span> <span style="">//</span> Random edges.<br />
&nbsp; &nbsp; &nbsp; &nbsp; var node1 <span style="">=</span> choice<span style="">&#40;</span>g.nodes<span style="">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; var node2 <span style="">=</span> choice<span style="">&#40;</span>g.nodes<span style="">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; &nbsp; g.addEdge<span style="">&#40;</span>node1, node2, <span style="">&#123;</span>weight: Math.random<span style="">&#40;</span><span style="">&#41;</span><span style="">&#125;</span><span style="">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; <span style="">&#125;</span><br />
&nbsp; &nbsp; &nbsp; g.prune<span style="">&#40;</span><span style="color: #666;">0</span><span style="">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; g.betweennessCentrality<span style="">&#40;</span><span style="">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; g.eigenvectorCentrality<span style="">&#40;</span><span style="">&#41;</span>;<br />
&nbsp; &nbsp; &nbsp; g.loop<span style="">&#40;</span><span style="">&#123;</span>frames:<span style="color: #666;">500</span>, fps:<span style="color: #666;">20</span>, ipf:<span style="color: #666;">2</span>, weighted:<span style="color: #666;">0.5</span>, directed:true<span style="">&#125;</span><span style="">&#41;</span>;<br />
&nbsp; &nbsp; <span style="">&#125;</span><br />
&nbsp; &lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">script</span>&gt;<br />
&nbsp; &lt;<span style="color: #28334f; font-weight: bold;">style</span> <span style="">type</span><span style="">=</span><span style="color: #657a8a;">&quot;text/css&quot;</span>&gt;<br />
&nbsp; &nbsp; #graph { display: block; position: relative; overflow: hidden; }<br />
&nbsp; &nbsp; .node-label { font: 11px sans-serif; }<br />
&nbsp; &lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">style</span>&gt;<br />
&lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">head</span>&gt;</code></span></span></p>
<p><span class="example"><span class="geshifilter"><code class="html4strict geshifilter-html4strict">&lt;<span style="color: #28334f; font-weight: bold;">body</span> <span style="">onload</span><span style="">=</span><span style="color: #657a8a;">&quot;javascript:init_graph();&quot;</span>&gt; <br />
&nbsp; &lt;<span style="color: #28334f; font-weight: bold;">div</span> <span style="">id</span><span style="">=</span><span style="color: #657a8a;">&quot;graph&quot;</span> <span style="">style</span><span style="">=</span><span style="color: #657a8a;">&quot;width:700px; height:500px;&quot;</span>&gt;<br />
&nbsp; &nbsp; &lt;<span style="color: #28334f; font-weight: bold;">canvas</span> <span style="">id</span><span style="">=</span><span style="color: #657a8a;">&quot;_ctx&quot;</span> <span style="">width</span><span style="">=</span><span style="color: #657a8a;">&quot;700&quot;</span> <span style="">height</span><span style="">=</span><span style="color: #657a8a;">&quot;500&quot;</span>&gt;&lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">canvas</span>&gt;<br />
&nbsp; &lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">div</span>&gt;<br />
&lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">body</span>&gt;</code></span></span></p>
<p><span class="example"><span class="geshifilter"><code class="html4strict geshifilter-html4strict">&lt;<span style="">/</span><span style="color: #28334f; font-weight: bold;">html</span>&gt; </code></span></span></p>
<p><img class="border" src="../g/pattern_graph4.jpg" alt="" width="610" height="390" /></p>
<p>Loading&nbsp;<a href="http://code.google.com/p/explorercanvas/" target="_blank">excanvas.js</a> in the <span class="inline_code">&lt;head&gt;</span> enables support for Internet Explorer 6-8:</p>
<p><span class="inline_code">&lt;!--[if lte IE 8]&gt;&lt;script type="text/javascript" src="/js/excanvas.js"&gt;&lt;/script&gt;&lt;![endif]--&gt;</span></p>
<p>&nbsp;</p>
<hr />
<h2>See also</h2>
<ul>
<li><a href="http://gephi.org/" target="_blank">Gephi</a> (GPL): ne<span>twork analysis &amp; visualization, with a beautiful GUI.</span></li>
<li><a href="http://networkx.lanl.gov/" target="_blank">NetworkX</a> (BSD): f<span>ull network analysis toolkit for Python + NumPy.</span></li>
<li><a href="http://www.cityinabottle.org/nodebox/" target="_blank">NodeBox</a> (BSD): g<span>raphics toolkit for Python + OpenGL.</span></li>
</ul>
</div>
</div></div>
        </div>
    </div>
    </div>
    </div>
    </div>
    </div>
</body>
</html>